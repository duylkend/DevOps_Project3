Install eksctl https://github.com/eksctl-io/eksctl/releases/tag/v0.177.0-rc.0
eksctl create cluster --name my-cluster --region us-east-1 --nodegroup-name my-nodes --node-type t3.small --nodes 1 --nodes-min 1 --nodes-max 2
aws eks --region us-east-1 update-kubeconfig --name my-cluster
kubectl config current-context
kubectl config view
eksctl delete cluster --name my-cluster --region us-east-1

kubectl apply -f pvc.yaml
kubectl apply -f pv.yaml
kubectl apply -f postgresql-deployment.yaml
kubectl apply -f postgresql-service.yaml
kubectl exec -it postgresql-6889d46b98-8xh7g -- bash
kubectl port-forward svc/postgresql-service 5433:5432 &
kubectl port-forward --namespace default svc/postgresql-service 5433:5432 &
export POSTGRES_PASSWORD=$(kubectl get secret --namespace default postgresql-service -o jsonpath="{.data.postgres-password}" | base64 -d)
psql --host 127.0.0.1 -U myuser -d mydatabase -p 5433 < 1_create_tables.sql
psql --host 127.0.0.1 -U myuser -d mydatabase -p 5433 < 2_seed_users.sql
psql --host 127.0.0.1 -U myuser -d mydatabase -p 5433 < 3_seed_tokens.sql
psql --host 127.0.0.1 -U myuser -d mydatabase -p 5433
ps aux | grep 'kubectl port-forward' | grep -v grep | awk '{print $2}' | xargs -r kill
setx DB_USERNAME=myuser

http://192.168.1.17:5153/api/reports/daily_usage
http://192.168.1.17:5153/api/reports/user_visits

set DB_USERNAME=myuser
set DB_PASSWORD=%POSTGRES_PASSWORD%
set DB_HOST=127.0.0.1
set DB_PORT=5433
set DB_NAME=mydatabase

aws eks create-addon --addon-name amazon-cloudwatch-observability --cluster-name my-cluster